
{% extends "Base/base.html" %}

{% block title %} Add New User {% endblock %}
{% load humanize %}
{% load static %}

{% block main_block %}

<div class="container-fluid py-4">
  <div class="row justify-content-center">
    <div class="col-10">
      <div class="d-flex justify-content-between align-items-center mb-4 ">
        <h3 class="fw-bold mb-0">Create User</h3>
      </div>

      <div class="card shadow col-12 col-xl-12 col-xxl-12">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0">
            <i class="bi bi-plus-circle me-2"></i>Add New User
          </h5>
        </div>
        <div class="card-body">
          <form action="{% url 'register_page' %}" id="user_form" method="post" autocomplete="off">
            {% csrf_token %}

            <div class="row mb-3">
              <div class="col-md-6">
                <label for="firstName" class="form-label fw-semibold text-dark">First Name</label><span style="color:red;"> *</span>
                <input type="text" id="first_name" name="firstName" class="form-control" maxlength="15" placeholder="First Name"  >
                <div class="invalid-feedback" id="first_name_error">Please provide a First Name.</div>

              </div>
              <div class="col-md-6">
                <label for="lastName" class="form-label fw-semibold text-dark">Last Name</label><span style="color:red;"> *</span>
                <input type="text" id="last_name" name="lastName" class="form-control" maxlength="15" placeholder="Last Name"  />
                <div class="invalid-feedback" id="last_name_error">Please provide a Last Name.</div>

              </div>
            </div>

            <div class="row mb-3">
              <div class="col-md-6">
                <label for="username" class="form-label fw-semibold text-dark">Username</label><span style="color:red;"> *</span>
                <input type="text" id="username" name="username" class="form-control" maxlength="15" placeholder="Username" />
                <div   class="invalid-feedback"  id="username_error">Please provide a Username.</div>

              </div>
              <div class="col-md-6">
                <label for="email" class="form-label fw-semibold text-dark">Email</label><span style="color:red;"> *</span>
                <input type="email" id="email" name="emailAddress" class="form-control" maxlength="50" placeholder="Enter Email"  />
                <span class="invalid-feedback" id="email_error">Please provide Valid Email.</span>

              </div>
            </div>

            <div class="row mb-3">
              <div class="col-md-6">
                <label for="password" class="form-label fw-semibold text-dark">Password</label><span style="color:red;"> *</span>
                <input type="password" id="password" name="password" minlength="8" maxlength="20" class="form-control" placeholder="Password"  />
                <span class="invalid-feedback" id="password_error">Please Provide Valid Password</span>

              </div>
              <div class="col-md-6">
                <label for="confirm_password" class="form-label fw-semibold text-dark">Confirm Password</label><span style="color:red;"> *</span>
                <input type="password" id="confirm_password" name="confirm_password" minlength="8" maxlength="20" placeholder="Confirm Password" class="form-control" />
                <span class="invalid-feedback" id="confirm_password_error">Please Provide Confirm Password Password</span>

              </div>

            <div class="col-md-6">
              <div class="form-check">
                <input type="checkbox" class="form-check-input" id="showPassword">
                <label class="form-check-label" for="showPassword">View  Password</label>
              </div>
            </div>
            </div>

            <div class="d-flex justify-content-end gap-2 border-top pt-3">
             <a href="{% url "register_page" %}"><button type="button" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-clockwise me-1"></i>Reset
              </button></a>
              <button type="submit" class="btn btn-primary">
                <i class="bi bi-check-circle me-1"></i>Create
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock main_block %}
{% block script %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Password show/hide
    document.getElementById("showPassword").addEventListener("click", function () {
      const p1 = document.getElementById("password");
      const p2 = document.getElementById("confirm_password");
      const type = p1.type === "password" ? "text" : "password";
      p1.type = type;
      p2.type = type;
    });

    
  });
</script>


<script>

document.addEventListener('DOMContentLoaded', function () {
    const usernameInput = document.getElementById('username');
    const usernameError = document.getElementById('username_error');

    const firstNameInput = document.getElementById('first_name');
    const firstNameError = document.getElementById('first_name_error');

    const lastNameInput = document.getElementById('last_name');
    const lastNameError = document.getElementById('last_name_error');

    const emailInput = document.getElementById('email');
    const emailError = document.getElementById('email_error');

    const passwordInput = document.getElementById('password');
    const passwordError = document.getElementById('password_error');

    const confirmPasswordInput = document.getElementById('confirm_password');
    const confirmPasswordError = document.getElementById('confirm_password_error');

    const myForm = document.getElementById('user_form');

    function validateUsername() {
        if (usernameInput.value.trim() === '') {
            usernameError.style.display = 'block';
            return false;
        } else {
            usernameError.style.display = 'none';
            return true;
        }
    }

    function validateFirstName() {
        if (firstNameInput.value.trim() === '') {
            firstNameError.style.display = 'block';
            return false;
        } else {
            firstNameError.style.display = 'none';
            return true;
        }
    }

    function validateLastName() {
        if (lastNameInput.value.trim() === '') {
            lastNameError.style.display = 'block';
            return false;
        } else {
            lastNameError.style.display = 'none';
            return true;
        }
    }

    function validateEmail() {
        const email = emailInput.value.trim();
        const emailPattern = /^(?!.*([.-])\1)(?!.*([.-])$)(?!.*[.-]$)(?!.*[.-]{2})[a-zA-Z0-9_%+-][a-zA-Z0-9._%+-]*@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        if (email === '' || !emailPattern.test(email)) {
            emailError.style.display = 'block';
            return false;
        } else {
            emailError.style.display = 'none';
            return true;
        }
    }

    function validatePassword() {
        if (passwordInput.value.trim() === '') {
            passwordError.style.display = 'block';
            return false;
        } else {
            passwordError.style.display = 'none';
            return true;
        }
    }

    function validateConfirmPassword() {
        if (confirmPasswordInput.value.trim() !== passwordInput.value.trim()) {
            confirmPasswordError.style.display = 'block';
            return false;
        } else {
            confirmPasswordError.style.display = 'none';
            return true;
        }
    }

    function validateForm() {
        const isUsernameValid = validateUsername();
        const isFirstNameValid = validateFirstName();
        const isLastNameValid = validateLastName();
        const isEmailValid = validateEmail();
        const isPasswordValid = validatePassword();
        const isConfirmPasswordValid = validateConfirmPassword();

        return (
            isUsernameValid &&
            isFirstNameValid &&
            isLastNameValid &&
            isEmailValid &&
            isPasswordValid &&
            isConfirmPasswordValid
        );
    }

  
    usernameInput.addEventListener('input', validateUsername);
    firstNameInput.addEventListener('input', validateFirstName);
    lastNameInput.addEventListener('input', validateLastName);
    emailInput.addEventListener('input', validateEmail);
    passwordInput.addEventListener('input', validatePassword);
    confirmPasswordInput.addEventListener('input', validateConfirmPassword);
    usernameInput.addEventListener('blur', validateUsername);
    firstNameInput.addEventListener('blur', validateFirstName);
    lastNameInput.addEventListener('blur', validateLastName);
    emailInput.addEventListener('blur', validateEmail);
    passwordInput.addEventListener('blur', validatePassword);
    confirmPasswordInput.addEventListener('blur', validateConfirmPassword);

    myForm.addEventListener('submit', function (event) {
        event.preventDefault();

        if (validateForm()) {
            myForm.submit();
        } else {
            const firstError = document.querySelector('[style*="display: block"]');
            if (firstError) {
                firstError.scrollIntoView({ behavior: 'smooth' });
            }
        }
    });
});
</script>



{% comment %} 
<script>

const FirstInput = document.getElementById('first_name');
const FirstError = document.getElementById('firstname_error');

function validateFirstName() {
  const FirstNameValue = FirstInput.value.trim(); // Trim whitespace

  if (FirstNameValue === '') {
    FirstError.style.display = 'block'; 
  } else {
    FirstError.style.display = 'none';
  }
}

// Call validateFirstName initially to show error if field is empty on page load
validateFirstName(); 

FirstInput.addEventListener('input', validateFirstName);
FirstInput.addEventListener('blur', validateFirstName);


</script>




<script>
const LastInput = document.getElementById('last_name');
const LastError = document.getElementById('lastname_error');

function validateLastName() {
  const LastNameValue = FirstInput.value.trim(); 

  if (LastNameValue === '') {
    LastError.style.display = 'block'; 
  } else {
    LastError.style.display = 'none';
  }
}

validateLastName(); 

LastInput.addEventListener('input', validateLastName);
LastInput.addEventListener('blur', validateLastName);

</script>



<script>

const UserInput = document.getElementById('username');
const UserError = document.getElementById('username_error');

function validateUserName() {
  const UserNameValue = FirstInput.value.trim(); 

  if (UserNameValue === '') {
    UserError.style.display = 'block'; 
  } else {
    UserError.style.display = 'none';
  }
}


validateUserName(); 

UserInput.addEventListener('input', validateUserName);
UserInput.addEventListener('blur', validateUserName);


</script>

<script>
  const emailInput = document.getElementById('email');
const emailFeedback = document.getElementById('email_error');

const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; 

function validateEmail() {
  const emailValue = emailInput.value.trim(); 

  if (emailValue === '' || !emailRegex.test(emailValue)) {  
    emailFeedback.style.display = 'block'; 
  } else {
    emailFeedback.style.display = 'none';
  }
}

validateEmail();

emailInput.addEventListener('input', validateEmail); 
emailInput.addEventListener('blur', validateEmail); 
</script>




<script>

const PasswordInput = document.getElementById('password');
const PasswordError = document.getElementById('password_error');

function validatePassword() {
  const PasswordValue = PasswordInput.value.trim(); 

  if (PasswordValue === '') {
    PasswordError.style.display = 'block'; 
  } else {
    PasswordError.style.display = 'none';
  }
}

validatePassword(); 

PasswordInput.addEventListener('input', validatePassword);
PasswordInput.addEventListener('blur', validatePassword);


</script>

<script>

const CFPasswordInput = document.getElementById('confirm_password');
const CFPasswordError = document.getElementById('cf_password_error');

function validateCFPassword() {
  const CFPasswordValue = PasswordInput.value.trim(); 

  if (CFPasswordValue === '') {
    CFPasswordError.style.display = 'block'; 
  } else {
    CFPasswordError.style.display = 'none';
  }
}

validateCFPassword(); 

CFPasswordInput.addEventListener('input', validateCFPassword);
CFPasswordInput.addEventListener('blur', validateCFPassword);


</script>

 {% endcomment %}



{% endblock script %}


